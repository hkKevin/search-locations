(function(){var e={4736:function(e,t,o){"use strict";var n=o(9242),s=o(3396),a=o(7139);const i=(0,s.Uk)("Get current position"),r={key:0,class:"cur-pos-response"},c=(0,s.Uk)("Search"),l={key:1,class:"delete-div"},u=(0,s.Uk)(" Delete "),d={key:0,class:"num-of-selected"},h={key:3,class:"no-search-results"},p={key:4};function f(e,t,o,f,m,g){const b=(0,s.up)("a-button"),v=(0,s.up)("a-table"),y=(0,s.up)("v-map");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(b,{type:"default",onClick:g.getLocation},{default:(0,s.w5)((()=>[i])),_:1},8,["onClick"]),m.curPosResponse?((0,s.wg)(),(0,s.iD)("div",r,(0,a.zw)(m.curPosResponse),1)):(0,s.kq)("",!0),(0,s._)("form",{id:"search-form",onSubmit:t[1]||(t[1]=(...e)=>g.submitSearch&&g.submitSearch(...e))},[(0,s.wy)((0,s._)("input",{id:"search-text",type:"text",placeholder:"Search Locations","onUpdate:modelValue":t[0]||(t[0]=e=>m.searchText=e)},null,512),[[n.nr,m.searchText]]),(0,s.Wm)(b,{type:"primary",onClick:g.submitSearch},{default:(0,s.w5)((()=>[c])),_:1},8,["onClick"])],32),m.outputResults.length>0?((0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(b,{danger:"",disabled:!g.hasSelected,onClick:g.deleteHandler},{default:(0,s.w5)((()=>[u])),_:1},8,["disabled","onClick"]),g.hasSelected?((0,s.wg)(),(0,s.iD)("div",d,"Selected "+(0,a.zw)(m.selectedRowKeys.length)+" "+(0,a.zw)(1===m.selectedRowKeys.length?"location":"locations"),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),m.outputResults.length>0?((0,s.wg)(),(0,s.j4)(v,{key:2,id:"search-results-table",columns:m.tableColumns,"data-source":m.outputResults,"row-selection":{selectedRowKeys:m.selectedRowKeys,onChange:g.onSelectChange}},null,8,["columns","data-source","row-selection"])):m.outputResults.length<=0&&m.searched?((0,s.wg)(),(0,s.iD)("div",h,"No results")):(0,s.kq)("",!0),m.outputResults.length>0&&m.latestLocationInfo?((0,s.wg)(),(0,s.iD)("div",p,(0,a.zw)(m.latestLocationInfo),1)):(0,s.kq)("",!0),(0,s.Wm)(y,{options:m.map},null,8,["options"])])}o(1306);var m=o(4805),g={name:"App",components:{VMap:m.Gi},data(){return{searchText:"",curPosResponse:!1,searchResponse:[],outputResults:[],tableColumns:[{title:"Location",dataIndex:"address",key:"address"}],selectedRowKeys:[],searched:!1,baseUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/",mapboxToken:"pk.eyJ1Ijoia2V2aW44NTIiLCJhIjoiY2w3N3d3dHYzMDQ0YzNvcGx6b3Nndmg4NSJ9.3AuL3Enwv-Lt02i_8mDP4Q",mapStyle:"mapbox://styles/mapbox/light-v10",map:{accessToken:"pk.eyJ1Ijoia2V2aW44NTIiLCJhIjoiY2w3N3d3dHYzMDQ0YzNvcGx6b3Nndmg4NSJ9.3AuL3Enwv-Lt02i_8mDP4Q",style:"mapbox://styles/mapbox/light-v10",center:[-79.40688,43.73033],zoom:1,maxZoom:15,crossSourceCollisions:!1,failIfMajorPerformanceCaveat:!1,attributionControl:!1,preserveDrawingBuffer:!0,hash:!1,minPitch:0,maxPitch:60},coordinates:[-79.40688,43.73033],latestLocationInfo:""}},watch:{outputResults(e){e.length>0&&fetch(`https://api.timezonedb.com/v2.1/get-time-zone?key=W2M9HH219UX6&format=json&by=position&lat=${this.outputResults[0].coord[1]}&lng=${this.outputResults[0].coord[0]}`).then((e=>e.json())).then((e=>{console.log(`Timezone of ${this.outputResults[0].address}: `,e.zoneName),this.latestLocationInfo=e.abbreviation+", "+e.formatted+", "+e.zoneName})).catch((e=>alert(e)))}},computed:{hasSelected(){return this.selectedRowKeys.length>0}},methods:{submitSearch(e){e.preventDefault(),fetch(`${this.baseUrl}${this.searchText}.json?limit=10&proximity=ip&access_token=${this.mapboxToken}`).then((e=>e.json())).then((e=>{this.outputResults=[];for(const t of e.features)this.outputResults.push({key:t.id,address:t.place_name,coord:t.center})})).catch((e=>console.warn(e.message))),this.searched=!0},getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:o}=e.coords;fetch(`${this.baseUrl}${o},${t}.json?access_token=${this.mapboxToken}`).then((e=>e.json())).then((e=>{const t=e.features[0];e.features.length>0&&t.place_name&&(this.curPosResponse=t.place_name)})).catch((e=>console.warn(e.message)))}),(e=>{console.warn(e.message),this.curPosResponse=e.message})):alert("Geolocation not supported.")},onSelectChange(e){this.selectedRowKeys=e},deleteHandler(){const e=[];for(const t of this.selectedRowKeys)e.push(this.outputResults.map((e=>e.key)).indexOf(t));this.outputResults=this.outputResults.filter(((t,o)=>!e.includes(o))),this.selectedRowKeys=[]}}},b=o(89);const v=(0,b.Z)(g,[["render",f]]);var y=v,w=o(8738);o(2467);(0,n.ri)(y).use(w.ZP).mount("#app")},9521:function(){},2249:function(){}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,a){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],a=e[u][2];for(var r=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(r=!1,a<i&&(i=a));if(r){e.splice(u--,1);var l=s();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,s,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,a,i=n[0],r=n[1],c=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(c)var u=c(o)}for(t&&t(n);l<i.length;l++)a=i[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},n=self["webpackChunksearch_locations"]=self["webpackChunksearch_locations"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(4736)}));n=o.O(n)})();
//# sourceMappingURL=app.91c1605c.js.map