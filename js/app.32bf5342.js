(function(){var e={7710:function(e,t,o){"use strict";var s=o(9242),n=o(3396),a=o(7139);const i=(0,n.Uk)("Get current position"),c={key:0,class:"cur-pos-response"},r=(0,n.Uk)("Search"),l={key:1,class:"delete-div"},u=(0,n.Uk)(" Delete "),h={key:0,class:"num-of-selected"},d={key:3,class:"no-search-results"},p={key:4};function f(e,t,o,f,m,g){const b=(0,n.up)("a-button"),v=(0,n.up)("a-table"),y=(0,n.up)("v-map");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(b,{type:"default",onClick:g.getLocation},{default:(0,n.w5)((()=>[i])),_:1},8,["onClick"]),m.curPosResponse?((0,n.wg)(),(0,n.iD)("div",c,(0,a.zw)(m.curPosResponse),1)):(0,n.kq)("",!0),(0,n._)("form",{id:"search-form",onSubmit:t[1]||(t[1]=(...e)=>g.submitSearch&&g.submitSearch(...e))},[(0,n.wy)((0,n._)("input",{id:"search-text",type:"text",placeholder:"Search Locations","onUpdate:modelValue":t[0]||(t[0]=e=>m.searchText=e)},null,512),[[s.nr,m.searchText]]),(0,n.Wm)(b,{type:"primary",onClick:g.submitSearch},{default:(0,n.w5)((()=>[r])),_:1},8,["onClick"])],32),m.outputResults.length>0?((0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(b,{danger:"",disabled:!g.hasSelected,onClick:g.deleteHandler},{default:(0,n.w5)((()=>[u])),_:1},8,["disabled","onClick"]),g.hasSelected?((0,n.wg)(),(0,n.iD)("div",h,"Selected "+(0,a.zw)(m.selectedRowKeys.length)+" "+(0,a.zw)(1===m.selectedRowKeys.length?"location":"locations"),1)):(0,n.kq)("",!0)])):(0,n.kq)("",!0),m.outputResults.length>0?((0,n.wg)(),(0,n.j4)(v,{key:2,id:"search-results-table",columns:m.tableColumns,"data-source":m.outputResults,"row-selection":{selectedRowKeys:m.selectedRowKeys,onChange:g.onSelectChange}},null,8,["columns","data-source","row-selection"])):m.outputResults.length<=0&&m.searched?((0,n.wg)(),(0,n.iD)("div",d,"No results")):(0,n.kq)("",!0),m.outputResults.length>0&&m.latestLocationInfo?((0,n.wg)(),(0,n.iD)("div",p,(0,a.zw)(m.latestLocationInfo),1)):(0,n.kq)("",!0),(0,n.Wm)(y,{options:m.map},null,8,["options"])])}o(1306);var m=o(4805),g={name:"App",components:{VMap:m.Gi},data(){return{searchText:"",curPosResponse:!1,searchResponse:[],outputResults:[],tableColumns:[{title:"Location",dataIndex:"address",key:"address"}],selectedRowKeys:[],searched:!1,baseUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/",mapboxToken:"pk.eyJ1Ijoia2V2aW44NTIiLCJhIjoiY2w3N3d3dHYzMDQ0YzNvcGx6b3Nndmg4NSJ9.3AuL3Enwv-Lt02i_8mDP4Q",mapStyle:"mapbox://styles/mapbox/light-v10",map:{accessToken:"pk.eyJ1Ijoia2V2aW44NTIiLCJhIjoiY2w3N3d3dHYzMDQ0YzNvcGx6b3Nndmg4NSJ9.3AuL3Enwv-Lt02i_8mDP4Q",style:"mapbox://styles/mapbox/light-v10",center:[-79.40688,43.73033],zoom:1,maxZoom:15,crossSourceCollisions:!1,failIfMajorPerformanceCaveat:!1,attributionControl:!1,preserveDrawingBuffer:!0,hash:!1,minPitch:0,maxPitch:60},coordinates:[-79.40688,43.73033],latestLocationInfo:""}},watch:{outputResults(e){e.length>0&&fetch(`http://api.timezonedb.com/v2.1/get-time-zone?key=W2M9HH219UX6&format=json&by=position&lat=${this.outputResults[0].coord[1]}&lng=${this.outputResults[0].coord[0]}`).then((e=>e.json())).then((e=>{console.log(`Timezone of ${this.outputResults[0].address}: `,e.zoneName),this.latestLocationInfo=e.abbreviation+", "+e.formatted+", "+e.zoneName})).catch((e=>alert(e)))}},computed:{hasSelected(){return this.selectedRowKeys.length>0}},methods:{submitSearch(e){e.preventDefault(),console.log("Search submitted: ",this.searchText),fetch(`${this.baseUrl}${this.searchText}.json?limit=10&proximity=ip&access_token=${this.mapboxToken}`).then((e=>e.json())).then((e=>{console.log("Searched: ",e),this.outputResults=[];for(const t of e.features)this.outputResults.push({key:t.id,address:t.place_name,coord:t.center})})).catch((e=>alert(e.message))),this.searched=!0},getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{console.log("ðŸš€ ~ file: App.vue ~ line 35 ~ navigator.gerlocation.getCurrentPosition ~ position",e);const{latitude:t,longitude:o}=e.coords;fetch(`${this.baseUrl}${o},${t}.json?access_token=${this.mapboxToken}`).then((e=>e.json())).then((e=>{console.log(e);const t=e.features[0];e.features.length>0&&t.place_name&&(this.curPosResponse=t.place_name)})).catch((e=>alert(e.message)))}),(e=>{console.log(e.message),this.curPosResponse=e.message})):alert("Geolocation not supported.")},onSelectChange(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e,console.log("ðŸš€ ~ file: App.vue ~ line 121 ~ onSelectChange ~ this.selectedRowKeys",this.selectedRowKeys)},deleteHandler(){const e=[];for(const t of this.selectedRowKeys)e.push(this.outputResults.map((e=>e.key)).indexOf(t));this.outputResults=this.outputResults.filter(((t,o)=>!e.includes(o))),this.selectedRowKeys=[]}}},b=o(89);const v=(0,b.Z)(g,[["render",f]]);var y=v,w=o(8738);o(2467);(0,s.ri)(y).use(w.ZP).mount("#app")},9521:function(){},2249:function(){}},t={};function o(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,s,n,a){if(!s){var i=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],a=e[u][2];for(var c=!0,r=0;r<s.length;r++)(!1&a||i>=a)&&Object.keys(o.O).every((function(e){return o.O[e](s[r])}))?s.splice(r--,1):(c=!1,a<i&&(i=a));if(c){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,n,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,a,i=s[0],c=s[1],r=s[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(n in c)o.o(c,n)&&(o.m[n]=c[n]);if(r)var u=r(o)}for(t&&t(s);l<i.length;l++)a=i[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},s=self["webpackChunksearch_locations"]=self["webpackChunksearch_locations"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(7710)}));s=o.O(s)})();
//# sourceMappingURL=app.32bf5342.js.map